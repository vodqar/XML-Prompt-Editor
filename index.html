<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XML Prompt Editor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="overlay" id="overlay"></div>
    <div class="container">
        <header class="header">
            <!-- 모바일 전용 메뉴 버튼 (헤더에 통합) -->
            <button class="header-menu-btn" id="headerMenuBtn" data-i18n-key="sidebar_menu_tooltip" data-i18n-target="title">
                <i class="fas fa-bars"></i>
            </button>

            <h1 data-i18n-key="app_title"><i class="fas fa-code"></i> </h1>
            
            <div class="header-actions">
                <button id="settingsBtn" class="btn btn-secondary" data-i18n-key="settings_button_tooltip" data-i18n-target="title">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="language-switcher">
                    <button class="btn btn-secondary" id="langBtn" title="Change Language">
                        <i class="fas fa-globe"></i>
                    </button>
                    <div class="language-dropdown" id="langDropdown">
                        <a href="#" class="lang-option" data-lang="ko">한국어</a>
                        <a href="#" class="lang-option" data-lang="en">English</a>
                    </div>
                </div>
                <button id="importBtn" class="btn btn-secondary" data-i18n-key="import_button_tooltip" data-i18n-target="title">
                    <i class="fas fa-file-import"></i>
                </button>                
                <button id="clearAllBtn" class="btn btn-secondary" data-i18n-key="clear_all_tooltip" data-i18n-target="title">
                    <i class="fas fa-trash-alt"></i> <span data-i18n-key="clear_all_button"></span>
                </button>
                <button id="copyBtnHeader" class="btn btn-primary" data-i18n-key="copy_xml_tooltip" data-i18n-target="title">
                    <i class="fas fa-copy"></i> <span data-i18n-key="copy_button"></span>
                </button>
            </div>
        </header>

        <div class="main-content">
            <aside class="sidebar" id="sidebar">
                <h3 data-i18n-key="sidebar_title"><i class="fas fa-tags"></i> </h3>
				<div class="credits-section">
					<p class="developer-info">
						<strong>Developed by vodqar</strong>
					</p>
					<div class="credit-links">
						<a href="mailto:mbk7990@gmail.com" title="이메일 보내기">
							<i class="fas fa-envelope"></i> Email
						</a>
						<a href="https://github.com/vodqar" target="_blank" rel="noopener noreferrer" title="GitHub 프로필 방문">
							<i class="fab fa-github"></i> GitHub
						</a>
					</div>
					<p class="license-info">
						Released under the MIT License.
					</p>
				</div>
            </aside>

            <main class="editor-area">
                <div class="editor-header">
                    <h3 data-i18n-key="editor_title"><i class="fas fa-edit"></i> </h3>
                    <div class="view-switcher">
                        <div class="switcher-background"></div>
                        <button id="view-edit-btn" class="switcher-btn active" data-i18n-key="view_switcher_edit"></button>
                        <button id="view-preview-btn" class="switcher-btn" data-i18n-key="view_switcher_preview"></button>
                    </div>
                    <!-- AI 생성 버튼 추가 -->
                    <button id="aiGenerateBtn" class="btn btn-ai" data-i18n-key="ai_generate_button" data-i18n-target="title">
                        <i class="fas fa-magic-wand-sparkles"></i>
                        <span data-i18n-key="ai_generate_button"></span>
                    </button>
                    <div class="editor-actions">
                        <button id="addBlockBtn" class="btn btn-small" data-i18n-key="add_block_tooltip" data-i18n-target="title">
                            <i class="fas fa-plus"></i> <span data-i18n-key="add_block_button"></span>
                        </button>
                    </div>
                </div>

                <div class="inline-block-add" id="inlineBlockAdd">
                     <div class="inline-add-container">
                        <input 
                            type="text" 
                            id="inlineAddInput" 
                            class="inline-add-input" 
                            data-i18n-key="new_tag_placeholder"
                            data-i18n-target="placeholder"
                            
                            aria-label="새 블록 태그 입력"
                        >
                        <div class="inline-add-actions">
                            <button id="inlineAddConfirm" class="inline-add-btn inline-add-confirm" data-i18n-key="new_tag_confirm_tooltip" data-i18n-target="title">
                                <i class="fas fa-check"></i>
                            </button>
                            <button id="inlineAddCancel" class="inline-add-btn inline-add-cancel" data-i18n-key="new_tag_cancel_tooltip" data-i18n-target="title">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="view-container">
                    <div id="edit-view" class="view active">
                        <div id="blockContainer" class="block-container">
                        </div>
                        <div class="empty-state" id="emptyState">
                            <i class="fas fa-cube"></i>
                            <h4 data-i18n-key="empty_state_title"></h4>
                            <p data-i18n-key="empty_state_description"></p>
                        </div>
                    </div>
                    <div id="preview-view" class="view">
                        <div class="preview-content-inline">
                            <pre id="previewCode"></pre>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
   <!-- 가져오기 모달 -->
    <div id="importModal" class="modal-container">
        <div class="modal-content">
            <header class="modal-header">
                <h3 class="modal-title" data-i18n-key="import_modal_title"></h3>
                <button id="closeImportModalBtn" class="modal-close-btn">&times;</button>
            </header>
            <div class="modal-body">
                <label for="xmlInput" class="modal-label" data-i18n-key="import_modal_label"></label>
                <textarea id="xmlInput" class="modal-textarea" placeholder="<role>...</role>"></textarea>
                <div id="validationFeedback" class="modal-feedback"></div>
            </div>
            <footer class="modal-footer">
                <div class="modal-options">
                     <label class="radio-label">
                        <input type="radio" name="import-option" value="append" checked>
                        <span data-i18n-key="import_option_append"></span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="import-option" value="replace">
                        <span data-i18n-key="import_option_replace"></span>
                    </label>
                </div>
                <div class="modal-actions">
                    <button id="cancelImportBtn" class="btn btn-secondary" data-i18n-key="import_button_cancel"></button>
                    <button id="applyImportBtn" class="btn btn-primary" data-i18n-key="import_button_apply" disabled></button>
                </div>
            </footer>
        </div>
    </div>
    <div id="settingsModal" class="modal-container"></div>
    <div id="aiModal" class="modal-container"></div>
    <script src="js/i18n.js"></script> 
    <script src="js/presets.js"></script>
    <script src="js/blocks.js"></script>
    <script src="js/app.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
</body>
</html>
